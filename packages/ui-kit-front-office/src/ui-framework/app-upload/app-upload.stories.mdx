import { Meta, Story, Canvas, Source, ArgsTable } from '@storybook/addon-docs';
import AppUpload from './app-upload.vue';
import { apiConfig } from '@sdk5/shared/api';
const config = {
  action: `${apiConfig.baseURL}/media-files`,
  tip: {
    message: 'validation.upload_image_with_restrictions',
    params: {
      size: 5,
      extensions: 'JPEG, PNG',
    },
  },
  label: 'form.label.upload_passport',
};

<Meta
  title="ui-framework/AppUpload"
  component={AppUpload}
/>

export const Template = (args, { argTypes }) => ({
  props: Object.keys(argTypes),
  components: { AppUpload },
  methods: {
    onSuccessHandler(response) {
      console.log(response);
    },
  },
  template: `<app-upload
      :is-loading="isLoading"
      :action="action"
      :tip="tip"
      :label="label"
      :on-success="onSuccessHandler">
    </app-upload>`,
});

## AppUpload

Example:

<Source
  code={`
  <app-upload
    :action="action"
    :tip="tip"
    :file-url="fileUrl"
    :is-loading="isLoading"
    label="label"/>
`}
/>

### Default

<Canvas>
  <Story
    name="Default view"
    args={{ action: config.action, tip: config.tip, label: config.label }}>
    {Template.bind({})}
  </Story>
</Canvas>

### Loading

<Canvas>
  <Story
    name="Loading view"
    args={{ action: config.action, tip: config.tip, label: config.label, isLoading: true }}>
    {Template.bind({})}
  </Story>
</Canvas>

## Props

<ArgsTable story="Default view" />
